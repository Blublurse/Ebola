<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Tracker - Productivity Calendar</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide icons as SVG components
        const Calendar = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
        );

        const Plus = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const Check = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="3">
                <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
        );

        const Trash2 = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
        );

        const Sun = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
        );

        const Moon = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
        );

        function ProductivityTaskTracker() {
          const [darkMode, setDarkMode] = useState(() => {
            const saved = localStorage.getItem('darkMode');
            return saved ? JSON.parse(saved) : false;
          });
          
          const [tasks, setTasks] = useState(() => {
            const saved = localStorage.getItem('tasks');
            return saved ? JSON.parse(saved) : {};
          });
          
          const [selectedDate, setSelectedDate] = useState(new Date());
          const [newTask, setNewTask] = useState('');
          const [currentMonth, setCurrentMonth] = useState(new Date());

          // Save to localStorage whenever tasks or darkMode changes
          useEffect(() => {
            localStorage.setItem('tasks', JSON.stringify(tasks));
          }, [tasks]);

          useEffect(() => {
            localStorage.setItem('darkMode', JSON.stringify(darkMode));
          }, [darkMode]);

          const daysInMonth = (date) => {
            return new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();
          };

          const firstDayOfMonth = (date) => {
            return new Date(date.getFullYear(), date.getMonth(), 1).getDay();
          };

          const formatDate = (date) => {
            return date.toISOString().split('T')[0];
          };

          const addTask = () => {
            if (newTask.trim()) {
              const dateKey = formatDate(selectedDate);
              setTasks({
                ...tasks,
                [dateKey]: [...(tasks[dateKey] || []), { id: Date.now(), text: newTask, completed: false }]
              });
              setNewTask('');
            }
          };

          const toggleTask = (dateKey, taskId) => {
            setTasks({
              ...tasks,
              [dateKey]: tasks[dateKey].map(task =>
                task.id === taskId ? { ...task, completed: !task.completed } : task
              )
            });
          };

          const deleteTask = (dateKey, taskId) => {
            setTasks({
              ...tasks,
              [dateKey]: tasks[dateKey].filter(task => task.id !== taskId)
            });
          };

          const changeMonth = (offset) => {
            setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + offset, 1));
          };

          const renderCalendar = () => {
            const days = [];
            const totalDays = daysInMonth(currentMonth);
            const firstDay = firstDayOfMonth(currentMonth);
            const today = new Date();
            
            for (let i = 0; i < firstDay; i++) {
              days.push(<div key={`empty-${i}`} className="aspect-square"></div>);
            }

            for (let day = 1; day <= totalDays; day++) {
              const date = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), day);
              const dateKey = formatDate(date);
              const isSelected = formatDate(selectedDate) === dateKey;
              const isToday = formatDate(today) === dateKey;
              const dayTasks = tasks[dateKey] || [];
              const completedCount = dayTasks.filter(t => t.completed).length;

              days.push(
                <div
                  key={day}
                  onClick={() => setSelectedDate(date)}
                  className={`aspect-square p-2 rounded-lg cursor-pointer transition-all ${
                    isSelected
                      ? darkMode ? 'bg-blue-600 text-white' : 'bg-blue-500 text-white'
                      : isToday
                      ? darkMode ? 'bg-gray-700 border-2 border-blue-500' : 'bg-gray-100 border-2 border-blue-500'
                      : darkMode ? 'bg-gray-800 hover:bg-gray-700' : 'bg-white hover:bg-gray-50'
                  } ${darkMode ? 'border border-gray-700' : 'border border-gray-200'}`}
                >
                  <div className="text-sm font-semibold mb-1">{day}</div>
                  {dayTasks.length > 0 && (
                    <div className="flex flex-col gap-0.5">
                      <div className={`text-xs ${isSelected ? 'text-white' : darkMode ? 'text-gray-400' : 'text-gray-600'}`}>
                        {completedCount}/{dayTasks.length}
                      </div>
                      <div className="flex gap-0.5">
                        {dayTasks.slice(0, 3).map(task => (
                          <div
                            key={task.id}
                            className={`w-1.5 h-1.5 rounded-full ${
                              task.completed
                                ? 'bg-green-500'
                                : darkMode ? 'bg-yellow-500' : 'bg-orange-500'
                            }`}
                          ></div>
                        ))}
                      </div>
                    </div>
                  )}
                </div>
              );
            }

            return days;
          };

          const selectedDateKey = formatDate(selectedDate);
          const selectedTasks = tasks[selectedDateKey] || [];

          return (
            <div className={`min-h-screen transition-colors ${darkMode ? 'bg-gray-900 text-white' : 'bg-gray-50 text-gray-900'}`}>
              <div className="max-w-7xl mx-auto p-6">
                <div className="flex items-center justify-between mb-8">
                  <div className="flex items-center gap-3">
                    <Calendar className="w-8 h-8 text-blue-500" />
                    <h1 className="text-3xl font-bold">Task Tracker</h1>
                  </div>
                  <button
                    onClick={() => setDarkMode(!darkMode)}
                    className={`p-3 rounded-lg transition-colors ${
                      darkMode ? 'bg-gray-800 hover:bg-gray-700' : 'bg-white hover:bg-gray-100'
                    }`}
                  >
                    {darkMode ? <Sun className="w-5 h-5" /> : <Moon className="w-5 h-5" />}
                  </button>
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
                  <div className="lg:col-span-2">
                    <div className={`rounded-xl p-6 ${darkMode ? 'bg-gray-800' : 'bg-white'} shadow-lg`}>
                      <div className="flex items-center justify-between mb-6">
                        <button
                          onClick={() => changeMonth(-1)}
                          className={`px-4 py-2 rounded-lg font-medium ${
                            darkMode ? 'bg-gray-700 hover:bg-gray-600' : 'bg-gray-100 hover:bg-gray-200'
                          }`}
                        >
                          ←
                        </button>
                        <h2 className="text-xl font-bold">
                          {currentMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })}
                        </h2>
                        <button
                          onClick={() => changeMonth(1)}
                          className={`px-4 py-2 rounded-lg font-medium ${
                            darkMode ? 'bg-gray-700 hover:bg-gray-600' : 'bg-gray-100 hover:bg-gray-200'
                          }`}
                        >
                          →
                        </button>
                      </div>

                      <div className="grid grid-cols-7 gap-2 mb-2">
                        {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (
                          <div key={day} className={`text-center text-sm font-semibold ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>
                            {day}
                          </div>
                        ))}
                      </div>

                      <div className="grid grid-cols-7 gap-2">
                        {renderCalendar()}
                      </div>
                    </div>
                  </div>

                  <div className="lg:col-span-1">
                    <div className={`rounded-xl p-6 ${darkMode ? 'bg-gray-800' : 'bg-white'} shadow-lg sticky top-6`}>
                      <h3 className="text-xl font-bold mb-4">
                        {selectedDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}
                      </h3>

                      <div className="flex gap-2 mb-6">
                        <input
                          type="text"
                          value={newTask}
                          onChange={(e) => setNewTask(e.target.value)}
                          onKeyPress={(e) => e.key === 'Enter' && addTask()}
                          placeholder="Add a task..."
                          className={`flex-1 px-4 py-2 rounded-lg ${
                            darkMode 
                              ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400' 
                              : 'bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500'
                          } border focus:outline-none focus:ring-2 focus:ring-blue-500`}
                        />
                        <button
                          onClick={addTask}
                          className="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors"
                        >
                          <Plus className="w-5 h-5" />
                        </button>
                      </div>

                      <div className="space-y-2 max-h-96 overflow-y-auto">
                        {selectedTasks.length === 0 ? (
                          <p className={`text-center py-8 ${darkMode ? 'text-gray-500' : 'text-gray-400'}`}>
                            No tasks for this day
                          </p>
                        ) : (
                          selectedTasks.map(task => (
                            <div
                              key={task.id}
                              className={`flex items-center gap-3 p-3 rounded-lg ${
                                darkMode ? 'bg-gray-700' : 'bg-gray-50'
                              }`}
                            >
                              <button
                                onClick={() => toggleTask(selectedDateKey, task.id)}
                                className={`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center ${
                                  task.completed
                                    ? 'bg-green-500 border-green-500'
                                    : darkMode ? 'border-gray-500' : 'border-gray-300'
                                }`}
                              >
                                {task.completed && <Check className="w-3 h-3 text-white" />}
                              </button>
                              <span className={`flex-1 ${task.completed ? 'line-through opacity-50' : ''}`}>
                                {task.text}
                              </span>
                              <button
                                onClick={() => deleteTask(selectedDateKey, task.id)}
                                className={`flex-shrink-0 p-1 rounded ${
                                  darkMode ? 'hover:bg-gray-600' : 'hover:bg-gray-200'
                                }`}
                              >
                                <Trash2 className="w-4 h-4 text-red-500" />
                              </button>
                            </div>
                          ))
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          );
        }

        ReactDOM.render(<ProductivityTaskTracker />, document.getElementById('root'));
    </script>
</body>
</html>
